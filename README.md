# Leads Dashboard with Authentication

Панель управления лидами с системой авторизации и ролевой моделью доступа.

## Функциональность

### Система авторизации
- **Администратор**: Полный доступ к системе управления дашбордами
- **Пользователь**: Доступ только к назначенным дашбордам

### Тестовые учетные записи

#### Администратор
- **Логин**: `admin`
- **Пароль**: `admin`
- **Возможности**:
  - Создание и управление дашбордами
  - Назначение владельцев дашбордов
  - Просмотр всех пользователей системы

#### Пользователи
- **Логин**: `user1` | **Пароль**: `password`
- **Логин**: `user2` | **Пароль**: `password`
- **Возможности**:
  - Просмотр назначенных дашбордов
  - Открытие дашбордов через Google Apps Script

### Административная панель

#### Управление дашбордами
- Создание новых дашбордов
- Указание названия и ссылки на Google Apps Script
- Выбор владельца дашборда из списка пользователей
- Просмотр всех созданных дашбордов в виде карточек

#### Управление пользователями
- Просмотр списка всех пользователей системы
- Информация о ролях пользователей

### Пользовательская панель
- Просмотр только назначенных дашбордов
- Открытие дашбордов в новой вкладке
- Информация о владельце и дате создания

## Технические детали

### Технологии
- **Next.js 14** - React фреймворк
- **TypeScript** - Типизация
- **Tailwind CSS** - Стилизация
- **Radix UI** - UI компоненты
- **Lucide React** - Иконки

### Структура проекта
```
├── app/
│   ├── layout.tsx          # Корневой layout с AuthProvider
│   └── page.tsx           # Главная страница с роутингом
├── components/
│   ├── auth/
│   │   └── login-form.tsx # Форма входа
│   ├── admin/
│   │   ├── admin-panel.tsx           # Административная панель
│   │   ├── create-dashboard-modal.tsx # Модальное окно создания дашборда
│   │   └── dashboard-card.tsx        # Карточка дашборда
│   └── user/
│       └── user-dashboard.tsx        # Пользовательская панель
├── lib/
│   └── auth-context.tsx   # Контекст авторизации
└── components/ui/         # UI компоненты
```

### Состояние авторизации
- Сохраняется в localStorage
- Автоматическое восстановление сессии при перезагрузке
- Ролевая модель доступа (admin/user)

## Запуск проекта

1. Установите зависимости:
```bash
npm install
```

2. Запустите сервер разработки:
```bash
npm run dev
```

3. Откройте [http://localhost:3000](http://localhost:3000) в браузере

## Использование

1. **Вход в систему**: Используйте тестовые учетные записи
2. **Администратор**: Создавайте дашборды и назначайте владельцев
3. **Пользователь**: Просматривайте назначенные дашборды

## Интеграция с Google Sheets

Теперь данные можно подгружать напрямую по ссылке Google Sheets.

Как использовать:
- В разделе `Подключение источника данных` вставьте ссылку на таблицу Google Sheets (доступ: «Любой, у кого есть ссылка»).
- Нажмите «Загрузить». Будет вызван `/api/sheets?url=...`, который:
  - Для ссылок вида `/gviz/` распарсит JSONP-ответ Google Visualization API
  - Для обычных ссылок сконвертирует их в экспорт CSV и распарсит строки
- Альтернатива: укажите URL Google Apps Script и нажмите «Загрузить».

Возвращаемый формат API: `{ data: Array<Record<string, any>> }`.

## Особенности

- Полностью клиентская авторизация (для демонстрации)
- Сохранение данных в localStorage
- Адаптивный дизайн
- Русская локализация
- Валидация форм
- Обработка ошибок
